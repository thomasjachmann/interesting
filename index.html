<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <title>Zinsberechnung</title>
    <link href='css/styles.css' media='all' rel='stylesheet' type='text/css'>
  </head>
  <body ng-app ng-controller='InterestCtrl'>
    <table class='inputs cost'>
      <caption>Preisermittlung</caption>
      <tr>
        <td class='label'>
          <label for='price'>Grunderwerb (bei Bestand inkl. Haus)</label>
        </td>
        <td class='input'>
          <input id='price' ng-change='calculate()' ng-model='inputs.price' step='10000' type='number'>
        </td>
        <td class='output'>{{inputs.price | currency:"&euro; "}}</td>
      </tr>
      <tr>
        <td class='label'>
          <label for='addOns'>Zusatzkosten (z. B. Hausbau)</label>
        </td>
        <td class='input'>
          <input id='notary' ng-change='calculate()' ng-model='inputs.addOns' step='10000' type='number'>
        </td>
        <td class='output'>{{inputs.addOns | currency:"&euro; "}}</td>
      </tr>
      <tr class='result'>
        <td class='label'>Gesamtwert</td>
        <td class='input'></td>
        <td class='output'>{{inputs.price + inputs.addOns | currency:"&euro; "}}</td></td>
      </tr>
      <tr>
        <td class='label'>
          <label for='brokerage'>Courtage</label>
        </td>
        <td class='input'>
          <input id='brokerage' ng-change='calculate()' ng-model='inputs.brokerage' step='0.05' type='number'>
        </td>
        <td class='output'>{{calculated.brokerageCost | currency:"&euro; "}}</td>
      </tr>
      <tr>
        <td class='label'>
          <label for='tax'>Grunderwerbsteuer</label>
        </td>
        <td class='input'>
          <input id='tax' ng-change='calculate()' ng-model='inputs.tax' step='0.5' type='number'>
        </td>
        <td class='output'>{{calculated.taxCost | currency:"&euro; "}}</td>
      </tr>
      <tr>
        <td class='label'>
          <label for='notary'>Notarkosten</label>
        </td>
        <td class='input'>
          <input id='notary' ng-change='calculate()' ng-model='inputs.notary' step='0.5' type='number'>
        </td>
        <td class='output'>{{calculated.notaryCost | currency:"&euro; "}}</td>
      </tr>
      <tr class='result'>
        <td class='label'>Gesamtnebenkosten</td>
        <td class='input'></td>
        <td class='output'>{{calculated.brokerageCost + calculated.taxCost + calculated.notaryCost | currency:"&euro; "}}</td>
      </tr>
      <tr class='result'>
        <td class='label'>Summe</td>
        <td class='input'></td>
        <td class='output'>{{calculated.cost | currency:"&euro; "}}</td></td>
      </tr>
    </table>
    <table class='inputs credit'>
      <caption>Zinsberechnung</caption>
      <tr>
        <td class='label'>
          <label for='capital'>Eigenkapital</label>
        </td>
        <td class='input'>
          <input id='capital' ng-change='calculate()' ng-model='inputs.capital' step='10000' type='number'>
        </td>
      </tr>
      <tr>
        <td class='label'>
          <label for='interestRate'>Zinssatz</label>
        </td>
        <td class='input'>
          <input id='interestRate' ng-change='calculate()' ng-model='inputs.interestRate' step='0.1' type='number'>
        </td>
      </tr>
      <tr>
        <td class='label'>
          <label for='amortizationRate'>Tilgungssatz</label>
        </td>
        <td class='input'>
          <input id='amortizationRate' ng-change='calculate()' ng-model='inputs.amortizationRate' step='0.1' type='number'>
        </td>
      </tr>
      <tr>
        <td class='label'>Kreditsumme</td>
        <td class='output'>{{calculated.credit | currency:"&euro; "}}</td>
      </tr>
      <tr>
        <td class='label'>Monatliche Rate</td>
        <td class='output'>{{calculated.payment | currency:"&euro; "}}</td>
      </tr>
      <tr>
        <td class='label'>Zahlungsdauer</td>
        <td class='output'>
          <span ng-show='months'>{{months.length / 12 | number:0}} Jahre und {{months.length % 12 | number}} Monate</span>
        </td>
      </tr>
      <tr>
        <td class='label'>Gesamtzinsen</td>
        <td class='output'>
          <span ng-show='months'>{{calculated.totalInterest | currency:"&euro; "}}</span>
        </td>
      </tr>
      <tr class='result'>
        <td class='label'>Gesamtkosten</td>
        <td class='output'>
          <span ng-show='months'>{{calculated.totalPayments + inputs.capital | currency:"&euro; "}}</span>
        </td>
      </tr>
      <tr>
        <td class='label'>davon Nebenkosten</td>
        <td class='output'>
          <span ng-show='months'>{{calculated.brokerageCost + calculated.taxCost + calculated.notaryCost + calculated.totalInterest | currency:"&euro; "}}</span>
        </td>
      </tr>
    </table>
    <div class='processing' ng-hide='months'>processing...</div>
    <ul id='months' ng-show='months'>
      <li class='month' ng-repeat='month in months' title=''>
        {{$index}}: {{month.payment | currency:"&euro; "}}
        <span class='interest' style='height: {{month.interest / 10 | number:0}}px' title='Zins: {{month.interest | currency}}'>{{month.interest | currency:"&euro; "}}</span>
        <span class='amortization' style='height: {{month.amortization / 10 | number:0}}px' title='Tilgung: {{month.amortization | currency}}'>{{month.amortization | currency:"&euro; "}}</span>
        =>
        <span class='balance' style='height: {{month.balance / 100 | number:0}}px' title='Kreditsumme: {{month.balance | currency}}'>{{month.balance | currency:"&euro; "}}</span>
      </li>
    </ul>
    <script src='http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.min.js' type='text/javascript'></script>
    <script src='javascript/app.js' type='text/javascript'></script>
  </body>
</html>
