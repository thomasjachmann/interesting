!!!
%html
  %head
    %meta{:charset => 'utf-8'}/
    %meta{:content => 'IE=edge,chrome=1', :"http-equiv" => 'X-UA-Compatible'}/
    %title Interesting - Zinsberechnung
    %link{:href => "css/styles.css", :rel => "stylesheet", :type => "text/css", :media => "all"}

  %body{:"ng-app" => "app", :"ng-controller" => "interestCtrl"}

    %ul.allInputs
      %li{:"ng-repeat" => "currentInputs in allInputs", :"ng-click" => "select($index)", :"ng-class" => "{true:'selected', false:''}[currentInputs == inputs]"}
        %span.name {{currentInputs.name}}
        %span.price {{currentInputs.price | currency:"&euro; "}}
        %span.addOns {{currentInputs.addOns | currency:"&euro; "}}

    %button{:"ng-click" => "add()"} Add

    %input{:type => "text", :"ng-model" => "inputs.name", :"ng-change" => "save()", :pattern => ".{1,}"}

    %table.inputs.cost
      %caption Preisermittlung
      %tr
        %td.label
          %label{:for => "price"}Grunderwerb (bei Bestand inkl. Haus)
        %td.input
          %input#price{:type => "number", :step => "10000", :"ng-model" => "inputs.price", :"ng-change" => "calculate()"}
        %td.output {{inputs.price | currency:"&euro; "}}
      %tr
        %td.label
          %label{:for => "addOns"} Zusatzkosten (z. B. Hausbau)
        %td.input
          %input#notary{:type => "number", :step => "10000", :"ng-model" => "inputs.addOns", :"ng-change" => "calculate()"}
        %td.output {{inputs.addOns | currency:"&euro; "}}
      %tr.result
        %td.label Gesamtwert
        %td.input
        %td.output {{inputs.price + inputs.addOns | currency:"&euro; "}}</td>
      %tr
        %td.label
          %label{:for => "brokerage"} Courtage
        %td.input
          %input#brokerage{:type => "number", :step => "0.05", :"ng-model" => "inputs.brokerage", :"ng-change" => "calculate()"}
        %td.output {{outputs.brokerageCost | currency:"&euro; "}}
      %tr
        %td.label
          %label{:for => "tax"} Grunderwerbsteuer
        %td.input
          %input#tax{:type => "number", :step => "0.5", :"ng-model" => "inputs.tax", :"ng-change" => "calculate()"}
        %td.output {{outputs.taxCost | currency:"&euro; "}}
      %tr
        %td.label
          %label{:for => "notary"} Notarkosten
        %td.input
          %input#notary{:type => "number", :step => "0.5", :"ng-model" => "inputs.notary", :"ng-change" => "calculate()"}
        %td.output {{outputs.notaryCost | currency:"&euro; "}}
      %tr.result
        %td.label Gesamtnebenkosten
        %td.input
        %td.output {{outputs.brokerageCost + outputs.taxCost + outputs.notaryCost | currency:"&euro; "}}
      %tr.result
        %td.label Summe
        %td.input
        %td.output {{outputs.cost | currency:"&euro; "}}</td>

    %table.inputs.credit
      %caption Zinsberechnung
      %tr
        %td.label
          %label{:for => "capital"} Eigenkapital
        %td.input
          %input#capital{:type => "number", :step => "10000", :"ng-model" => "inputs.capital", :"ng-change" => "calculate()"}
      %tr
        %td.label
          %label{:for => "interestRate"} Zinssatz
        %td.input
          %input#interestRate{:type => "number", :step => "0.1", :"ng-model" => "inputs.interestRate", :"ng-change" => "calculate()"}
      %tr
        %td.label
          %label{:for => "amortizationRate"} Tilgungssatz
        %td.input
          %input#amortizationRate{:type => "number", :step => "0.1", :"ng-model" => "inputs.amortizationRate", :"ng-change" => "calculate()"}
      %tr
        %td.label Kreditsumme
        %td.output {{outputs.credit | currency:"&euro; "}}
      %tr
        %td.label Monatliche Rate
        %td.output {{outputs.payment | currency:"&euro; "}}
      %tr
        %td.label Zahlungsdauer
        %td.output
          %span{:"ng-show" => "months"} {{months.length / 12 | number:0}} Jahre und {{months.length % 12 | number}} Monate
      %tr
        %td.label Gesamtzinsen
        %td.output
          %span{:"ng-show" => "months"} {{outputs.totalInterest | currency:"&euro; "}}
      %tr.result
        %td.label Gesamtkosten
        %td.output
          %span{:"ng-show" => "months"} {{outputs.totalPayments + inputs.capital | currency:"&euro; "}}
      %tr
        %td.label davon Nebenkosten
        %td.output
          %span{:"ng-show" => "months"} {{outputs.brokerageCost + outputs.taxCost + outputs.notaryCost + outputs.totalInterest | currency:"&euro; "}}

    .processing{:"ng-show" => "processing"} processing...
    %ul#months{:"ng-show" => "months"}
      %li.month{:"ng-repeat" => "month in months", :title => ""}
        {{$index}}: {{month.payment | currency:"&euro; "}}
        %span.interest{:style => "height: {{month.interest / 10 | number:0}}px", :title => "Zins: {{month.interest | currency}}"} {{month.interest | currency:"&euro; "}}
        %span.amortization{:style => "height: {{month.amortization / 10 | number:0}}px", :title => "Tilgung: {{month.amortization | currency}}"} {{month.amortization | currency:"&euro; "}}
        \=>
        %span.balance{:style => "height: {{month.balance / 100 | number:0}}px", :title => "Kreditsumme: {{month.balance | currency}}"} {{month.balance | currency:"&euro; "}}

    %script{:src => "http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.min.js", :type => "text/javascript"}
    %script{:src => "javascript/app.js", :type => "text/javascript"}
